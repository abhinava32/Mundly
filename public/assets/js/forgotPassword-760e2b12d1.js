$("#submit-btn").on("click",e=>{if(e.preventDefault(),flag1)alert("sending OTP"),$.ajax({type:"post",url:"/users/match-otp",data:$("form").serialize(),success:function(e){e.data.matched?(alert("matched OTP "),window.location.href="/users/reset-password"):(console.log(e.message),$("#message").css("color","red"),$("#message").text(e.message))}});else{if(!flag)return alert("please enter a valid email address!!"),!1;$.ajax({type:"post",url:"/users/send-otp",data:$("form").serialize(),success:function(e){e.data.found?($("#submit-btn").text("Enter OTP"),$("#message").css("color","green"),$("#message").text(e.message),$("#message").show(),$("#input-email").val(""),$("#input-email").attr("placeholder","Enter OTP Here"),$("#resend-otp").prop("disabled","false"),$("form").attr("action","/users/reset-password"),flag1=!0):(console.log(e.message),$("#message").css("color","red"),$("#message").text(e.message))}})}});const validateEmail=e=>(console.log("called function"),e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)),validate=()=>{var e,a;return!!flag1||(e=$("#result"),a=$("#input-email").val(),console.log("email provided is ",a),e.text(""),flag=!!validateEmail(a),!1)};$("#input-email").on("input",validate),$("#message").text("");var flag=!1,flag1=!1;